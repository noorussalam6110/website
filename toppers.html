<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Toppers - Noorussalam Madrasa</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Amiri&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti"></script>

<style>
body {
  margin:0;
  padding:20px;
  background:linear-gradient(135deg,#dff6ff,#b9dbff);
  font-family:"Poppins",sans-serif;
}

.container { max-width:1100px; margin:auto; }

h1 {
  text-align:center;
  color:#0d6efd;
  font-weight:800;
  margin-bottom:5px;
}

.sub {text-align:center; color:#033; opacity:.8; margin-bottom:25px;}

.grid {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:20px;
}
@media(max-width:768px){ .grid{grid-template-columns:1fr;} }

.card{
  background:white;
  border-radius:18px;
  padding:20px;
  border:3px solid gold;
  box-shadow:0 8px 23px rgba(0,0,0,.15);
  position:relative;
  overflow:hidden;
}

/* Shine Effect */
.card::after{
  content:"";
  position:absolute;
  top:-200%;
  left:-100%;
  width:250%;
  height:400%;
  background:linear-gradient(120deg,transparent,rgba(255,255,255,.5),transparent);
  animation:shine 5s linear infinite;
}
@keyframes shine{
  0%{transform:translateX(-100%) rotate(25deg)}
  50%{transform:translateX(120%) rotate(25deg)}
  100%{transform:translateX(120%) rotate(25deg)}
}

.medal{
  width:65px; height:65px; border-radius:50%;
  background:gold; display:flex; align-items:center; justify-content:center;
  font-size:24px; font-weight:900; color:#000; margin:auto;
}

.photo{
  width:120px; height:120px; border-radius:50%;
  overflow:hidden; margin:12px auto;
  border:4px solid #0d6efd;
}
.photo img{ width:100%; height:100%; object-fit:cover; }

.name{text-align:center;font-size:20px;font-weight:700;margin-top:5px;}
.meta{text-align:center;font-size:15px;color:#113;margin-top:3px;}

.btns{display:flex;justify-content:center;gap:10px;margin-top:12px;}
.btn{
  padding:10px 14px; border:none; border-radius:10px;
  font-weight:700; cursor:pointer;
}
.btn-download{background:gold;}
.btn-print{background:#0d6efd;color:white;}
</style>
</head>

<body>

<div class="container">
  <h1>CLASS TOPPERS (MARK)</h1>
  <div class="sub">First Rank Only • Offline Mode (No Google Sheet)</div>

  <div id="topperGrid" class="grid"></div>
</div>

<script>
// ------------------------------------------------------------
//  MANUAL TOPPER LIST  — EDIT THIS PART ONLY
// ------------------------------------------------------------
const toppers = [
  {class:"1", name:"Ayesha Rahman", mark:"498 / 500", photo:""},
  {class:"2", name:"Muhammed Shahid", mark:"493 / 500", photo:""},
  {class:"3", name:"Nimra Sameer", mark:"487 / 500", photo:""},
  {class:"4", name:"Faris P", mark:"489 / 500", photo:""},
  {class:"5", name:"Shamil N", mark:"491 / 500", photo:""},
  {class:"6", name:"Hana M", mark:"480 / 500", photo:""},
  {class:"7", name:"Riyas M", mark:"485 / 500", photo:""},
  {class:"8", name:"Zainab K", mark:"492 / 500", photo:""},
  {class:"9", name:"Yusuf T", mark:"488 / 500", photo:""},
  {class:"10", name:"Saniya F", mark:"495 / 500", photo:""}
];
// ------------------------------------------------------------


// Medal Sound
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playMedal(){
  const o = audioCtx.createOscillator(), g = audioCtx.createGain();
  o.frequency.value = 830;
  g.gain.value = 0.12;
  o.connect(g); g.connect(audioCtx.destination);
  o.start(); g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.5);
  o.stop(audioCtx.currentTime+0.5);
}

// Certificate Generator
const CERT_BG = "CERTIFICATR.jpg";
const SIG = "WhatsApp Image 2025-11-26 at 11.41.41 AM.jpeg";

function downloadCert(name, cls, mark, photo){
  generateCertificate(name, cls, mark, photo, "download");
  confetti({particleCount:150, spread:80});
}

function printCert(name, cls, mark, photo){
  generateCertificate(name, cls, mark, photo, "print");
}

function generateCertificate(name, cls, mark, photo, mode){
  const w=1920,h=1280, c=document.createElement("canvas");
  c.width=w; c.height=h;
  const ctx=c.getContext("2d");

  const bg=new Image(), sigImg=new Image();
  bg.src=CERT_BG; sigImg.src=SIG;

  bg.onload=()=>{

    ctx.drawImage(bg,0,0,w,h);

    ctx.textAlign="center";
    ctx.fillStyle="#000";

    ctx.font="700 70px Poppins";
    ctx.fillText("Certificate of Excellence", w/2, 300);

    ctx.font="700 60px Amiri";
    ctx.fillText("شهادة التفوق", w/2, 360);

    ctx.font="700 80px Poppins";
    ctx.fillText(name, w/2, 520);

    ctx.font="700 60px Amiri";
    ctx.fillText(name, w/2, 590);

    ctx.font="40px Poppins";
    ctx.fillText(`Class ${cls} | Mark: ${mark}`, w/2, 680);

    ctx.font="34px Amiri";
    ctx.fillText(`الصف ${cls}  |  الدرجات ${mark}`, w/2, 740);

    // Auto date
    const d=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});
    ctx.textAlign="left";
    ctx.font="30px Poppins";
    ctx.fillText(d, 150, h-150);

    // Draw signature
    sigImg.onload=()=>{
      ctx.drawImage(sigImg, w-600, h-350, 380, 160);

      // Output
      const url=c.toDataURL("image/png");
      if(mode==="download"){
        const a=document.createElement("a");
        a.href=url; a.download=`${name}-certificate.png`;
        a.click();
      } else {
        const w2=window.open("");
        w2.document.write(`<img src="${url}">`);
        setTimeout(()=>w2.print(),600);
      }
    };
  };
}

// Insert Cards
let html="";
toppers.forEach(t=>{
  const photo = t.photo || "https://via.placeholder.com/200x200.png?text=Photo";
  html += `
    <div class="card">
      <div class="medal">1</div>
      <div class="photo"><img src="${photo}"></div>
      <div class="name">${t.name}</div>
      <div class="meta">Class ${t.class} • ${t.mark}</div>

      <div class="btns">
        <button class="btn btn-download"
          onclick="playMedal(); downloadCert('${t.name}','${t.class}','${t.mark}','${photo}')">
          <i class="fa fa-download"></i> Download
        </button>

        <button class="btn btn-print"
          onclick="playMedal(); printCert('${t.name}','${t.class}','${t.mark}','${photo}')">
          <i class="fa fa-print"></i> Print
        </button>
      </div>
    </div>
  `;
});
document.getElementById("topperGrid").innerHTML = html;
</script>

</body>
</html>
